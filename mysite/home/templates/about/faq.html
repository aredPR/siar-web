{% extends "base.html" %}
{% load static %}

{% block title %}Preguntas Frecuentes{% endblock %}

{% block content %}

<div class="min-h-screen py-12 px-4 sm:px-6 lg:px-8">
    <div class="max-w-4xl mx-auto">
        <div class="text-center mb-12">
            <h1 class="text-4xl font-bold text-primary mb-4">Preguntas frecuentes</h1>
            <p class="text-lg text-gray-600">Todo lo que necesitas saber sobre el sistema de seguridad IoT de SIAR
            </p>
        </div>

        <!-- System Overview Section -->
        <div class="bg-white rounded-lg shadow-md overflow-hidden mb-4"><!-- Agregado mb-4 -->
            <button
                class="accordion-button w-full px-6 py-4 text-left bg-primary text-white font-semibold flex justify-between items-center">
                <span>Descripción general del sistema
                </span>
                <i class="fas fa-chevron-down transition-transform transform"></i>
            </button>
            <div class="accordion-content px-6 py-4 bg-white hidden"><!-- Agregado hidden -->
                <div class="space-y-4">
                    <div class="border-b border-gray-200 pb-4">
                        <h3 class="font-medium text-gray-900 mb-2">
                            ¿Qué es SIAR?</h3>
                        <p class="text-gray-600">SIAR es un sistema de seguridad IoT avanzado que utiliza tecnología
                            RFID para evitar el robo y la extracción no autorizada de artículos de las
                            instalaciones.</p>
                    </div>
                    <div class="border-b border-gray-200 pb-4">
                        <h3 class="font-medium text-gray-900 mb-2">¿Cómo funciona el sistema de prevención de robo
                            RFID?</h3>
                        <p class="text-gray-600">El sistema utiliza lectores RFID ubicados estratégicamente para
                            monitorear artículos etiquetados y envía alertas instantáneas cuando se detecta
                            movimiento no autorizado.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Technology Section -->
        <div class="bg-white rounded-lg shadow-md overflow-hidden mb-4"><!-- Agregado mb-4 -->
            <button
                class="accordion-button w-full px-6 py-4 text-left bg-primary text-white font-semibold flex justify-between items-center">
                <span>Tecnología</span>
                <i class="fas fa-chevron-down transition-transform transform"></i>
            </button>
            <div class="accordion-content px-6 py-4 bg-white hidden"><!-- Agregado hidden -->
                <div class="space-y-4">
                    <div class="border-b border-gray-200 pb-4">
                        <h3 class="font-medium text-gray-900 mb-2">¿Cómo funcionan los llaveros RFID?
                        </h3>
                        <p class="text-gray-600">Los llaveros RFID contienen identificadores únicos que son
                            detectados por los lectores, lo que permite un seguimiento y una autenticación precisos
                            de los artículos.
                        </p>
                    </div>
                    <div class="border-b border-gray-200 pb-4">
                        <h3 class="font-medium text-gray-900 mb-2">¿Cuál es el rango de detección?
                        </h3>
                        <p class="text-gray-600">El sistema tiene un rango de detección configurable de hasta 30
                            pies, dependiendo del entorno y los requisitos.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Security & Privacy Section -->
        <div class="bg-white rounded-lg shadow-md overflow-hidden mb-4"><!-- Agregado mb-4 -->
            <button
                class="accordion-button w-full px-6 py-4 text-left bg-primary text-white font-semibold flex justify-between items-center">
                <span>Seguridad y privacidad</span>
                <i class="fas fa-chevron-down transition-transform transform"></i>
            </button>
            <div class="accordion-content px-6 py-4 bg-white hidden"><!-- Agregado hidden -->
                <div class="space-y-4">
                    <div class="border-b border-gray-200 pb-4">
                        <h3 class="font-medium text-gray-900 mb-2">¿Están protegidos los datos de los clientes?
                        </h3>
                        <p class="text-gray-600">Sí, todos los datos se cifran mediante protocolos estándar de la
                            industria y se almacenan de forma segura cumpliendo con las regulaciones de privacidad.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Contact Information -->
        <div class="mt-12 text-center bg-gray-100 rounded-lg p-6">
            <h3 class="text-xl font-semibold text-gray-900 mb-4">¿Aún tienes preguntas?</h3>
            <p class="text-gray-600 mb-4">Estamos aquí para ayudarte. Contacta a nuestro equipo de soporte.</p>
            <!-- Formulario con diseño original y compatible con Formspree -->
            <form id="contactForm" class="bg-white p-6 rounded-lg shadow-lg max-w-xl mx-auto"
            action="https://formspree.io/f/mgvaepeq" 
            method="POST">
            <h3 class="text-lg font-semibold text-gray-700 mb-4">Envíanos un mensaje</h3>

            <div class="mb-4">
            <label for="name" class="block text-gray-700 font-medium">Nombre</label>
            <input type="text" id="name" name="name" class="w-full p-2 border rounded-lg"
                    placeholder="Escribe tu nombre" required>
            </div>

            <div class="mb-4">
            <label for="email" class="block text-gray-700 font-medium">Correo Electrónico</label>
            <input type="email" id="email" name="email" class="w-full p-2 border rounded-lg"
                    placeholder="Escribe tu correo" required pattern=".+@.+" required>
            </div>

            <div class="mb-4">
            <label for="message" class="block text-gray-700 font-medium">Mensaje</label>
            <textarea id="message" name="message" rows="4" class="w-full p-2 border rounded-lg"
                        placeholder="Escribe tu mensaje aquí" required></textarea>
            </div>

            <button type="submit"
                class="w-full bg-primary text-white font-semibold py-2 rounded-lg hover:bg-primary-dark">
            Enviar mensaje
            </button>
            </form>

        </div>
    </div>
</div>

<script>
    // Logica para el funcionamiento del formspree
    document.getElementById("contactForm").addEventListener("submit", function(event) {
        //Se agrega el evento submit.
        event.preventDefault();//se previene el comportamiento por default.
        const form = event.target; //se captura el formulario.
        
        fetch(form.action, { // se envía el formulario.
            method: form.method,
            body: new FormData(form),
            headers: {
                'Accept': 'application/json'
            }
        }).then(response => {
            if (response.ok) {
                form.reset();// se resetean los campos.
                // Usando SweetAlert para la alerta de éxito
                Swal.fire({
                    icon: 'success',
                    title: '¡Mensaje enviado!',
                    text: 'Tu mensaje ha sido enviado correctamente.',
                    confirmButtonColor: '#007bff',
                });
            } else {
                response.json().then(data => {
                    if (Object.hasOwn(data, 'errors')) {
                        // Usando SweetAlert para la alerta de error
                        Swal.fire({
                            icon: 'error',
                            title: 'Error',
                            text: 'Error al enviar el mensaje, intente nuevamente.',
                            confirmButtonColor: '#dc3545',
                        });
                    } else {
                        // Usando SweetAlert para la alerta de error
                        Swal.fire({
                            icon: 'error',
                            title: 'Error',
                            text: 'Error al enviar el mensaje, intente nuevamente.',
                            confirmButtonColor: '#264653',
                        });
                    }
                })
            }
        }).catch(error => {
            // Usando SweetAlert para la alerta de error
            Swal.fire({
                icon: 'error',
                title: 'Error',
                text: 'Error al enviar el mensaje, intente nuevamente.',
                confirmButtonColor: '#dc3545',
            });
        });
    });

    //Lógica de los acordeones
    const accordionButtons = document.querySelectorAll('.accordion-button');

    accordionButtons.forEach(button => {
        button.addEventListener('click', () => {
            const content = button.nextElementSibling;
            const icon = button.querySelector('i');

            content.classList.toggle('hidden'); // Muestra/oculta el contenido

            // Rotar el icono
            icon.classList.toggle('rotate-180');

        });
    });
</script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
{% endblock %}
